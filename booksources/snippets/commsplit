// commsplit.c
int mydata = mytid;
// create sub communicator modulo 2
color = mytid%2;
MPI_Comm_split(MPI_COMM_WORLD,color,mytid,&mod2comm);
MPI_Comm_rank(mod2comm,&new_mytid);

// create sub communicator modulo 4 recursively
color = new_mytid%2;
MPI_Comm_split(mod2comm,color,new_mytid,&mod4comm);
MPI_Comm_rank(mod4comm,&new_mytid);

if (mydata/4!=new_mytid)
  printf("Error %d %d %d\n",mytid,new_mytid,mydata/4);
